{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Alice\\\\Desktop\\\\2021S2\\\\Profolio\\\\nativeProject\\\\Stock-price-app\\\\stockPrice\\\\components\\\\Item.js\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { List, Avatar, Divider } from \"react-native-paper\";\nimport * as Linking from \"expo-linking\";\nimport Axios from \"axios\";\nimport Swipeable from \"react-native-gesture-handler/Swipeable\";\nimport { AntDesign } from \"@expo/vector-icons\";\nexport default function Item(_ref) {\n  var _this = this;\n\n  var code = _ref.code,\n      isUpdate = _ref.isUpdate,\n      handleDelete = _ref.handleDelete;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      company = _useState4[0],\n      setCompany = _useState4[1];\n\n  var baseUrl = \"https://www.asx.com.au/asx/1/share/\" + code;\n  var baseCompany = \"https://www.asx.com.au/asx/1/company/\" + code;\n\n  var shareData = function shareData() {\n    Axios.get(baseUrl).then(function (response) {\n      setData(response.data);\n    }).catch(function (error) {\n      alert(\"not found\");\n    });\n  };\n\n  var companyData = function companyData() {\n    Axios.get(baseCompany).then(function (response) {\n      setCompany(response.data);\n    }).catch(function (error) {\n      alert(\"not found\");\n    });\n  };\n\n  useEffect(function () {\n    shareData();\n    companyData();\n  }, [isUpdate]);\n\n  var titleCase = function titleCase(s) {\n    var changed = s.replace(/^[-_]*(.)/, function (_, c) {\n      return c.toUpperCase();\n    }).replace(/[-_]+(.)/g, function (_, c) {\n      return \" \" + c.toUpperCase();\n    });\n    return changed;\n  };\n\n  _handlePress = function _handlePress() {\n    Linking.openURL(\"https://au.finance.yahoo.com/quote/\" + code + \".Ax\");\n  };\n\n  var rightActions = function rightActions(stock) {\n    return React.createElement(View, {\n      style: styles.rightActions,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: [styles.actionText],\n      onPress: function onPress() {\n        return handleDelete(stock);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, React.createElement(AntDesign, {\n      name: \"delete\",\n      size: 24,\n      color: \"white\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    })));\n  };\n\n  var toRender = function toRender() {\n    if (data && company) {\n      return React.createElement(React.Fragment, null, React.createElement(Swipeable, {\n        renderRightActions: function renderRightActions() {\n          return rightActions(code);\n        },\n        key: code,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }\n      }, React.createElement(List.Item, {\n        title: code,\n        description: titleCase(company.name_abbrev),\n        left: function left(props) {\n          return React.createElement(TouchableOpacity, {\n            onPress: _handlePress,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }\n          }, React.createElement(Avatar.Image, {\n            size: 70,\n            style: {\n              backgroundColor: \"white\"\n            },\n            source: {\n              uri: \"https://files.marketindex.com.au/xasx/96x96-png/\" + code.toLowerCase() + \".png\"\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 19\n            }\n          }));\n        },\n        right: function right(props) {\n          return React.createElement(View, {\n            style: styles.price,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }\n          }, React.createElement(Text, {\n            style: data === undefined ? null : {\n              color: data.change_in_percent.slice(0, -1) >= 0 ? \"green\" : \"red\",\n              fontSize: 20\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 19\n            }\n          }, data.change_in_percent), React.createElement(Text, {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 19\n            }\n          }, data.change_price + \" \", data.last_price));\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }\n      }), React.createElement(Divider, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      })));\n    }\n  };\n\n  console.log(\"rerendered\", code);\n  return React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 10\n    }\n  }, toRender());\n}\nvar styles = StyleSheet.create({\n  price: {\n    marginTop: 10,\n    paddingRight: 5\n  },\n  rightActions: {\n    backgroundColor: \"#a62c2a\",\n    justifyContent: \"center\",\n    flex: 0.15\n  },\n  actionText: {\n    color: \"#fff\",\n    fontWeight: \"600\",\n    padding: 6,\n    marginLeft: 9,\n    backgroundColor: \"#a62c2a\"\n  }\n});","map":{"version":3,"sources":["C:/Users/Alice/Desktop/2021S2/Profolio/nativeProject/Stock-price-app/stockPrice/components/Item.js"],"names":["React","useEffect","useState","List","Avatar","Divider","Linking","Axios","Swipeable","AntDesign","Item","code","isUpdate","handleDelete","data","setData","company","setCompany","baseUrl","baseCompany","shareData","get","then","response","catch","error","alert","companyData","titleCase","s","changed","replace","_","c","toUpperCase","_handlePress","openURL","rightActions","stock","styles","actionText","toRender","name_abbrev","props","backgroundColor","uri","toLowerCase","price","undefined","color","change_in_percent","slice","fontSize","change_price","last_price","console","log","StyleSheet","create","marginTop","paddingRight","justifyContent","flex","fontWeight","padding","marginLeft"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  Animated,\r\n  TouchableOpacity,\r\n} from \"react-native\";\r\nimport { List, Avatar, Divider } from \"react-native-paper\";\r\nimport * as Linking from \"expo-linking\";\r\nimport Axios from \"axios\";\r\nimport Swipeable from \"react-native-gesture-handler/Swipeable\";\r\nimport { AntDesign } from \"@expo/vector-icons\";\r\n\r\nexport default function Item({ code, isUpdate,handleDelete }) {\r\n  const [data, setData] = useState(\"\");\r\n  const [company, setCompany] = useState(\"\");\r\n  const baseUrl = `https://www.asx.com.au/asx/1/share/${code}`;\r\n  const baseCompany = `https://www.asx.com.au/asx/1/company/${code}`;\r\n\r\n  const shareData = () => {\r\n    Axios.get(baseUrl)\r\n      .then((response) => {\r\n        setData(response.data);\r\n      })\r\n      .catch((error) => {\r\n        alert(\"not found\");\r\n      });\r\n  };\r\n\r\n  const companyData = () => {\r\n    Axios.get(baseCompany)\r\n      .then((response) => {\r\n        setCompany(response.data);\r\n      })\r\n      .catch((error) => {\r\n        alert(\"not found\");\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    shareData();\r\n    companyData();\r\n  }, [isUpdate]);\r\n\r\n  const titleCase = (s) => {\r\n    //titleCase(company.name_full)\r\n    const changed = s\r\n      .replace(/^[-_]*(.)/, (_, c) => c.toUpperCase()) // Initial char (after -/_)\r\n      .replace(/[-_]+(.)/g, (_, c) => \" \" + c.toUpperCase()); // First char after each -/_\r\n    return changed;\r\n  };\r\n\r\n  _handlePress = () => {\r\n    Linking.openURL(`https://au.finance.yahoo.com/quote/${code}.Ax`);\r\n  };\r\n\r\n  const rightActions = (stock) => {\r\n    return (\r\n      <View style={styles.rightActions}>\r\n        <TouchableOpacity\r\n          style={[styles.actionText]}\r\n          onPress={() => handleDelete(stock)}\r\n        >\r\n          <AntDesign name=\"delete\" size={24} color=\"white\" />\r\n        </TouchableOpacity>\r\n      </View>\r\n    );\r\n  };\r\n\r\n  const toRender = () => {\r\n    if (data && company) {\r\n      return (\r\n        <>\r\n          <Swipeable\r\n            renderRightActions={() => rightActions(code)}\r\n            key={code}\r\n          >\r\n            <List.Item\r\n              title={code}\r\n              description={titleCase(company.name_abbrev)}\r\n              left={(props) => (\r\n                <TouchableOpacity onPress={_handlePress}>\r\n                  <Avatar.Image\r\n                    size={70}\r\n                    style={{ backgroundColor: \"white\" }}\r\n                    source={{\r\n                      uri: `https://files.marketindex.com.au/xasx/96x96-png/${code.toLowerCase()}.png`,\r\n                    }}\r\n                  />\r\n                </TouchableOpacity>\r\n              )}\r\n              right={(props) => (\r\n                <View style={styles.price}>\r\n                  <Text\r\n                    style={\r\n                      data === undefined ? null : {color:data.change_in_percent.slice(0, -1) >= 0 ? \"green\": \"red\",\r\n                            fontSize: 20,\r\n                          }\r\n                    }\r\n                  >\r\n                    {data.change_in_percent}\r\n                  </Text>\r\n                  <Text>\r\n                    {data.change_price + \" \"}\r\n                    {data.last_price}\r\n                  </Text>\r\n                </View>\r\n              )}\r\n            />\r\n            <Divider />\r\n          </Swipeable>\r\n        </>\r\n      );\r\n    }\r\n  };\r\n\r\n  console.log(\"rerendered\", code);\r\n\r\n  return <View>{toRender()}</View>;\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  price: {\r\n    marginTop: 10,\r\n    paddingRight: 5,\r\n  },\r\n  rightActions: {\r\n    backgroundColor: \"#a62c2a\",\r\n    justifyContent: \"center\",\r\n    flex: 0.15,\r\n  },\r\n  actionText: {\r\n    color: \"#fff\",\r\n    fontWeight: \"600\",\r\n    padding: 6,\r\n    marginLeft: 9,\r\n    backgroundColor: \"#a62c2a\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}